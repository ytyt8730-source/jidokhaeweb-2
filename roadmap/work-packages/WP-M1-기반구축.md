# Work Package: M1 - 프로젝트 기반 구축

**Milestone:** M1
**목표:** 사용자가 회원가입하고 모임 목록을 확인할 수 있다
**기간:** 1~2주
**선행 조건:** 없음 (시작점)

---

## 1. Work Package 개요

```
Phase 1: 개발 환경 세팅
    ↓
Phase 2: 인증 시스템
    ↓
Phase 3: 모임 데이터 & 목록
    ↓
Phase 4: 모임 상세 & 마이페이지
```

**수직 분할 원칙:** 각 Phase 완료 시 사용자가 실제로 사용할 수 있는 기능이 추가됨

---

## 2. Phase 상세

### Phase 1: 개발 환경 세팅

**목표:** 개발 및 배포 인프라 완성
**예상 소요:** 1~2일

#### 작업 목록

| # | 작업 | 산출물 | 완료 기준 |
|---|------|--------|----------|
| 1.1 | Next.js 14 프로젝트 초기화 | `/` 프로젝트 루트 | `npm run dev` 정상 실행 |
| 1.2 | Tailwind CSS + 8px 그리드 설정 | `tailwind.config.ts` | 기본 스타일 적용 확인 |
| 1.3 | Pretendard + Noto Serif KR 폰트 설정 | `app/layout.tsx` | 폰트 렌더링 확인 |
| 1.4 | Framer Motion 설치 및 기본 설정 | `lib/motion.ts` | 애니메이션 variants 정의 |
| 1.5 | Supabase 프로젝트 생성 및 연결 | `.env.local` | 연결 테스트 통과 |
| 1.6 | 환경 변수 설정 (dev/prod 분리) | `.env.*` 파일들 | 환경별 분리 확인 |
| 1.7 | Vercel 배포 파이프라인 구축 | Vercel 프로젝트 | 자동 배포 동작 |
| 1.8 | 기본 레이아웃 컴포넌트 | `app/layout.tsx` | 모바일 반응형 확인 |

#### Scenario (검증 기준)

**SC-M1-001: 개발 서버 실행 성공** [Critical]
- **Given:** 프로젝트 클론 완료
- **When:** `npm install && npm run dev` 실행
- **Then:** localhost:3000에서 기본 페이지 표시
- **선행:** 없음

**SC-M1-001-1: 개발 서버 실행 실패 - 의존성 누락** [High]
- **Given:** node_modules 없이 프로젝트 클론만 완료
- **When:** `npm run dev` 실행 (install 생략)
- **Then:** 모듈 없음 에러 발생
- **선행:** 없음

**SC-M1-002: Vercel 자동 배포 성공** [Critical]
- **Given:** main 브랜치에 커밋
- **When:** push 완료
- **Then:** Vercel에서 자동 빌드 및 배포 성공
- **선행:** SC-M1-001

**SC-M1-002-1: Vercel 배포 실패 - 빌드 에러** [High]
- **Given:** TypeScript 타입 에러가 있는 코드
- **When:** main 브랜치에 push
- **Then:** Vercel 빌드 실패, 에러 로그 표시
- **선행:** SC-M1-001

**SC-M1-003: 폰트 적용 확인** [High]
- **Given:** 페이지 로드 완료
- **When:** 텍스트 확인
- **Then:** Pretendard(본문), Noto Serif KR(제목) 적용됨
- **선행:** SC-M1-001

**SC-M1-003-1: Supabase 연결 확인** [Critical]
- **Given:** 환경 변수 설정 완료
- **When:** Supabase 클라이언트 초기화
- **Then:** 연결 테스트 통과 (ping 성공)
- **선행:** SC-M1-001

**SC-M1-003-2: Supabase 연결 실패 - 잘못된 키** [High]
- **Given:** 잘못된 SUPABASE_KEY 설정
- **When:** Supabase 클라이언트 초기화
- **Then:** 인증 에러 발생
- **선행:** SC-M1-001

#### 사용자 가치
> "개발자가 코드를 작성하고 바로 배포할 수 있다"

---

### Phase 2: 인증 시스템

**목표:** 사용자가 회원가입하고 로그인할 수 있다
**예상 소요:** 2~3일

#### 작업 목록

| # | 작업 | 산출물 | 완료 기준 |
|---|------|--------|----------|
| 2.1 | users 테이블 생성 | `supabase/migrations/` | 마이그레이션 성공 (실명, 닉네임, 변경일, 제약조건 포함) |
| 2.2 | Row Level Security 기본 설정 | RLS 정책 | 본인 데이터만 접근 |
| 2.3 | 회원가입 페이지 UI | `app/auth/signup/page.tsx` | 폼 렌더링 확인 (실명, 닉네임, 이메일, 비밀번호) |
| 2.4 | 닉네임 중복 확인 API | `app/api/users/nickname/check` | 중복 여부 반환 |
| 2.5 | 닉네임 유효성 검증 | 입력 폼 | 2~20자, 허용 문자 체크 |
| 2.6 | 회원가입 API 연동 | Supabase Auth | 회원가입 성공 |
| 2.7 | 로그인 페이지 UI | `app/auth/login/page.tsx` | 폼 렌더링 확인 |
| 2.8 | 로그인 API 연동 | Supabase Auth | 로그인 성공 |
| 2.9 | 로그아웃 기능 | 헤더 컴포넌트 | 로그아웃 동작 |
| 2.10 | 인증 미들웨어 | `middleware.ts` | 비로그인 시 리다이렉트 |
| 2.11 | 인증 상태 컨텍스트 | `contexts/auth.tsx` | 전역 상태 관리 |

#### Scenario (검증 기준)

**SC-M1-004: 이메일 회원가입 성공** [Critical]
- **Given:** 회원가입 페이지 진입
- **When:** 실명/닉네임/이메일/비밀번호 입력 후 가입 버튼 클릭
- **Then:** 회원가입 성공, 로그인 페이지로 이동
- **선행:** 없음

**SC-M1-004-1: 회원가입 실패 - 닉네임 중복** [Critical]
- **Given:** 회원가입 페이지에서 닉네임 입력
- **When:** 이미 사용 중인 닉네임 입력
- **Then:** "이미 사용 중인 닉네임입니다" 에러 표시
- **선행:** SC-M1-004

**SC-M1-004-2: 회원가입 실패 - 닉네임 유효성** [High]
- **Given:** 회원가입 페이지에서 닉네임 입력
- **When:** 특수문자 또는 1자 이하 입력
- **Then:** "닉네임은 2~20자, 한글/영문/숫자/언더스코어만 가능" 에러 표시
- **선행:** 없음

**SC-M1-004-3: 회원가입 실패 - 이메일 중복** [Critical]
- **Given:** 회원가입 페이지 진입
- **When:** 이미 가입된 이메일로 회원가입 시도
- **Then:** "이미 가입된 이메일입니다" 에러 표시
- **선행:** SC-M1-004

**SC-M1-004-4: 회원가입 실패 - 이메일 형식 오류** [High]
- **Given:** 회원가입 페이지 진입
- **When:** 잘못된 이메일 형식(예: "test@") 입력
- **Then:** "올바른 이메일 형식을 입력하세요" 에러 표시
- **선행:** 없음

**SC-M1-004-5: 회원가입 실패 - 비밀번호 규칙 미충족** [High]
- **Given:** 회원가입 페이지 진입
- **When:** 6자 미만 비밀번호 입력
- **Then:** "비밀번호는 6자 이상이어야 합니다" 에러 표시
- **선행:** 없음

**SC-M1-005: 이메일 로그인 성공** [Critical]
- **Given:** 가입된 계정 존재
- **When:** 이메일/비밀번호로 로그인
- **Then:** 홈 화면으로 이동, 사용자 정보 표시
- **선행:** SC-M1-004

**SC-M1-005-1: 로그인 실패 - 잘못된 비밀번호** [High]
- **Given:** 가입된 계정 존재
- **When:** 잘못된 비밀번호로 로그인 시도
- **Then:** "비밀번호가 올바르지 않습니다" 에러 메시지 표시
- **선행:** SC-M1-004

**SC-M1-005-2: 로그인 실패 - 존재하지 않는 계정** [High]
- **Given:** 계정 없음
- **When:** 존재하지 않는 이메일로 로그인 시도
- **Then:** "등록되지 않은 이메일입니다" 에러 메시지 표시
- **선행:** 없음

**SC-M1-006: 로그아웃 성공** [Critical]
- **Given:** 로그인 상태
- **When:** 로그아웃 버튼 클릭
- **Then:** 로그인 페이지로 이동, 세션 삭제
- **선행:** SC-M1-005

**SC-M1-007: 비로그인 접근 차단** [Critical]
- **Given:** 비로그인 상태
- **When:** 보호된 페이지(마이페이지) 접근 시도
- **Then:** 로그인 페이지로 리다이렉트
- **선행:** 없음

**SC-M1-007-1: 로그인 후 원래 페이지로 복귀** [Medium]
- **Given:** 비로그인 상태로 보호된 페이지 접근 시도 후 리다이렉트됨
- **When:** 로그인 성공
- **Then:** 원래 접근하려던 페이지로 이동
- **선행:** SC-M1-007

#### 사용자 가치
> "사용자가 계정을 만들고 로그인할 수 있다"

---

### Phase 3: 모임 데이터 & 목록

**목표:** 사용자가 홈 화면에서 모임 목록을 확인할 수 있다
**예상 소요:** 2~3일

#### 작업 목록

| # | 작업 | 산출물 | 완료 기준 |
|---|------|--------|----------|
| 3.1 | meetings 테이블 생성 | DB 스키마 | 마이그레이션 성공 |
| 3.2 | refund_policies 테이블 생성 | DB 스키마 | 환불 규정 저장 가능 |
| 3.3 | 시드 데이터 생성 | `supabase/seed.sql` | 테스트 모임 생성 |
| 3.4 | 모임 목록 API | `app/api/meetings/` | 모임 데이터 조회 |
| 3.5 | 홈 화면 레이아웃 | `app/page.tsx` | 기본 구조 렌더링 |
| 3.6 | 모임 카드 컴포넌트 | `components/MeetingCard.tsx` | 컴팩트 디자인 |
| 3.7 | 카드 호버 애니메이션 | Framer Motion | Y축 -4px 이동 |
| 3.8 | 카드 리스트 Stagger 효과 | Framer Motion | 순차적 등장 |
| 3.9 | 마감 임박 뱃지 Pulse | Framer Motion | 부드러운 깜빡임 |
| 3.10 | 참가 인원 표시 | 카드 컴포넌트 | "O명 참여" 표시 |
| 3.11 | 운영자 모임 생성 기능 | 관리자 페이지 | 모임 CRUD |

#### Scenario (검증 기준)

**SC-M1-009: 모임 목록 조회 성공** [Critical]
- **Given:** 로그인 상태, 모임 데이터 존재
- **When:** 홈 화면 진입
- **Then:** 모임 카드 목록이 표시됨 (참가 인원 "O명 참여" 포함)
- **선행:** SC-M1-005

**SC-M1-009-1: 모임 없음 상태 표시** [High]
- **Given:** 로그인 상태, 모임 데이터 없음
- **When:** 홈 화면 진입
- **Then:** "등록된 모임이 없습니다" 안내 메시지 표시
- **선행:** SC-M1-005

**SC-M1-010: 카드 Stagger 애니메이션** [Medium]
- **Given:** 홈 화면 진입
- **When:** 페이지 로드 완료
- **Then:** 카드가 순차적으로 나타남 (stagger: 0.1s)
- **선행:** SC-M1-009

**SC-M1-011: 카드 호버 효과** [Medium]
- **Given:** 모임 카드 표시됨
- **When:** 카드에 마우스 호버
- **Then:** 카드가 Y축으로 -4px 이동
- **선행:** SC-M1-009

**SC-M1-012: 마감 임박 뱃지 표시** [High]
- **Given:** 남은 자리 3명 이하인 모임
- **When:** 카드 표시
- **Then:** "마감 임박" 뱃지가 Pulse 애니메이션으로 표시
- **선행:** SC-M1-009

**SC-M1-012-1: 마감 뱃지 표시** [High]
- **Given:** 정원이 가득 찬 모임
- **When:** 카드 표시
- **Then:** "마감" 뱃지 표시
- **선행:** SC-M1-009

**SC-M1-013: 운영자 모임 생성 성공** [Critical]
- **Given:** 운영자 로그인
- **When:** 모임 생성 폼(모임명, 일시, 장소, 정원, 참가비, 환불규정) 제출
- **Then:** 새 모임이 목록에 표시됨
- **선행:** SC-M1-005

**SC-M1-013-1: 모임 생성 실패 - 필수 정보 누락** [High]
- **Given:** 운영자 로그인
- **When:** 모임명 없이 생성 폼 제출
- **Then:** "모임명을 입력하세요" 에러 표시
- **선행:** SC-M1-005

**SC-M1-013-2: 비운영자 모임 생성 차단** [Critical]
- **Given:** 일반 사용자 로그인
- **When:** 모임 생성 페이지 접근 시도
- **Then:** 403 에러 또는 홈으로 리다이렉트
- **선행:** SC-M1-005

#### 사용자 가치
> "사용자가 홈 화면에서 모임 목록을 확인할 수 있다"

---

### Phase 4: 모임 상세 & 마이페이지

**목표:** 사용자가 모임 상세 정보와 내 정보를 확인할 수 있다
**예상 소요:** 2일

#### 작업 목록

| # | 작업 | 산출물 | 완료 기준 |
|---|------|--------|----------|
| 4.1 | 모임 상세 페이지 | `app/meetings/[id]/page.tsx` | 정보 표시 |
| 4.2 | 모임 정보 섹션 | 상세 컴포넌트 | 일시/장소/참여비 표시 |
| 4.3 | 책 정보 섹션 | 상세 컴포넌트 | 책 제목/저자 표시 |
| 4.4 | 환불 규정 표시 | 상세 컴포넌트 | 규정 목록 표시 |
| 4.5 | 마이페이지 레이아웃 | `app/mypage/page.tsx` | 기본 구조 |
| 4.6 | 내 정보 섹션 | 마이페이지 컴포넌트 | 실명/닉네임/이메일 표시 (본인만 실명 조회) |
| 4.7 | 모바일 반응형 최적화 | 전체 페이지 | 320px~768px 대응 |

#### Scenario (검증 기준)

**SC-M1-014: 모임 상세 조회 성공** [Critical]
- **Given:** 모임 목록에서 카드 클릭
- **When:** 상세 페이지 진입
- **Then:** 모임 정보(모임명, 일시, 장소, 책 정보, 참가비, 환불규정) 표시
- **선행:** SC-M1-009

**SC-M1-014-1: 존재하지 않는 모임 접근** [High]
- **Given:** 삭제된 또는 존재하지 않는 모임 ID
- **When:** 상세 페이지 URL 직접 접근
- **Then:** "모임을 찾을 수 없습니다" 에러 페이지 또는 홈으로 리다이렉트
- **선행:** SC-M1-005

**SC-M1-014-2: 환불 규정 표시** [High]
- **Given:** 모임 상세 페이지 진입
- **When:** 환불 규정 섹션 확인
- **Then:** 해당 모임의 환불 규정(5일 전 100%, 2일 전 50% 등) 표시
- **선행:** SC-M1-014

**SC-M1-015: 마이페이지 조회 성공** [Critical]
- **Given:** 로그인 상태
- **When:** 마이페이지 진입
- **Then:** 내 정보(실명, 닉네임, 이메일) 표시
- **선행:** SC-M1-005

**SC-M1-015-1: 마이페이지 - 타인 실명 비공개** [Critical]
- **Given:** 다른 사용자 프로필 조회 시도
- **When:** 해당 사용자 정보 요청
- **Then:** 닉네임만 표시, 실명은 비공개
- **선행:** SC-M1-005

**SC-M1-016: 모바일 반응형 - 320px** [High]
- **Given:** 모바일 기기 (320px 너비)
- **When:** 홈, 상세, 마이페이지 접근
- **Then:** UI가 깨지지 않고 정상 표시
- **선행:** SC-M1-009

**SC-M1-016-1: 모바일 반응형 - 768px** [Medium]
- **Given:** 태블릿 기기 (768px 너비)
- **When:** 모든 페이지 접근
- **Then:** UI가 적절히 반응하여 정상 표시
- **선행:** SC-M1-009

#### 사용자 가치
> "사용자가 모임 상세 정보를 확인하고 마이페이지에서 내 정보를 볼 수 있다"

---

## 3. 기술 검토 사항

| 항목 | 내용 | 참고 |
|------|------|------|
| Next.js 버전 | 14.x (App Router) | 공식 문서 |
| Supabase Auth | 이메일/비밀번호 인증 | Supabase 문서 |
| RLS 정책 | users: 본인만 읽기/수정 | Supabase RLS |
| Framer Motion | stagger, hover variants | Framer 문서 |
| 폰트 | next/font로 최적화 로드 | Next.js 문서 |

---

## 4. 전체 완료 검증

- [ ] Phase 1: 개발 환경 세팅 완료
- [ ] Phase 2: 인증 시스템 완료
- [ ] Phase 3: 모임 데이터 & 목록 완료
- [ ] Phase 4: 모임 상세 & 마이페이지 완료
- [ ] 모든 Scenario 통과
- [ ] main 머지 완료
- [ ] Vercel 프로덕션 배포 성공

---

## 변경 이력

| 날짜 | 버전 | 변경 내용 |
|------|------|----------|
| 2026-01-29 | 1.0 | WP-M1 최초 작성 |
