# AI 에이전트 가이드 (메타 문서)

> **버전**: 2.4
> **마지막 업데이트**: 2026-02-16
> **용도**: AI 에이전트가 프로젝트 문서를 **어떻게 따라야 하는지** 정의

---

## 1. 이 문서의 목적

이 프로젝트에는 여러 폴더에 README와 가이드 문서가 흩어져 있습니다.  
이 문서는 **"어떤 상황에서 어떤 문서를 따라야 하는지"**를 정의하는 **메타 가이드**입니다.

```
문서를 읽는 법을 알려주는 문서
```

---

## 2. 문서 계층 구조

```
/CLAUDE.md                    ← 코드 작성 규칙 (기술적)
    │
/core/AI_AGENT_GUIDE.md       ← 이 문서 (메타 규칙)
    │
    ├── /core/*.md            ← 기획 문서 (What, Why)
    ├── /roadmap/             ← 작업 계획 (When, How much)
    ├── /docs/                ← 기술 문서 (How)
    ├── /log/                 ← 작업 기록 (What happened)
    └── /jidokhae/            ← 소스 코드
```

---

## 3. 폴더별 README 역할

| 폴더 | README 위치 | 정의하는 것 |
|------|-------------|-------------|
| `/log/` | `/log/README.md` | 로그 파일 명명 규칙, 템플릿, 줄 수 제한 |
| `/docs/` | `/docs/README.md` | 기술 문서 구조, 문서 관리 원칙 |
| `/jidokhae/` | `/jidokhae/README.md` | 프로젝트 개요, 실행 방법, 폴더 구조 |
| `/roadmap/` | (없음) | `milestones.md`가 대신함 |
| `/core/` | (없음) | 이 문서가 대신함 |

---

## 4. 상황별 참조 문서

### 4.1 작업 시작 전

```
1. /log/current-state.md         ← 현재 어디까지 했는지
2. /roadmap/work-packages/WP-M*.md ← 해야 할 작업 목록
3. /roadmap/scenarios/SC-M*.md   ← 테스트 시나리오
```

### 4.2 코드 작성 중

```
1. /CLAUDE.md                    ← 코드 컨벤션, API 패턴, 폴더 구조
2. /docs/external-services.md    ← 외부 서비스 연동 시
3. /docs/troubleshooting-patterns.md ← 문제 발생 시
```

### 4.3 기획 확인 필요 시

```
1. /core/1__지독해_웹서비스_-_PRD_v1.7.md           ← 기능 상세, 비즈니스 규칙
2. /core/0__ 지독해 웹서비스 - 서비스 개요_v1.5.md  ← 핵심 가치, 사용자 흐름
3. /core/3__지독해_웹서비스_-_시스템_구조_v1.6.md   ← 데이터 흐름, 테이블 설계
```

### 4.4 작업 완료 후

```
1. /log/README.md                ← 로그 작성 규칙 확인
2. /log/current-state.md         ← 현재 상태 업데이트
3. WP-M*-완료-로그.md 작성       ← 템플릿 따라 작성
4. Git 커밋 + 푸시             ← /docs/git-workflow.md 규칙 따름
```

### 4.5 Git 작업 시

```
1. /docs/git-workflow.md         ← 브랜치/커밋/푸시 규칙
2. /CLAUDE.md (Git 섹션)       ← 빠른 참조
```

---

## 5. README 준수 규칙

### 5.1 `/log/README.md` 준수사항

| 규칙 | 설명 |
|------|------|
| 파일 명명 | `WP-M[번호]-[작업명]-완료-로그.md` |
| 줄 수 제한 | **100~200줄 이내** |
| 코드 기록 | **금지** - 파일 경로만 기록 |
| 필수 업데이트 | 작업 종료 시 `current-state.md` 반드시 업데이트 |

### 5.2 `/docs/README.md` 준수사항

| 규칙 | 설명 |
|------|------|
| ADR | 중요 기술 결정은 `/docs/adr/`에 기록 |
| 버전 관리 | 모든 문서에 버전 및 업데이트 날짜 기록 |
| 중복 방지 | 정보는 한 곳에서 관리, 다른 곳에서는 링크 |

### 5.3 `/jidokhae/README.md` 준수사항

| 규칙 | 설명 |
|------|------|
| 실행 방법 | 항상 최신 상태 유지 |
| 환경 변수 | `ENV_TEMPLATE.md` 참조 안내 |
| 마일스톤 | 완료 상태 현행화 |

---

## 6. 문서 간 우선순위

충돌 시 다음 순서로 우선:

```
1. /CLAUDE.md              ← 코드 컨벤션 (최우선)
2. /roadmap/work-packages/ ← 현재 작업의 구체적 요구사항
3. /core/*.md              ← 기획 의도
4. /docs/*.md              ← 기술 가이드
```

### 예시

| 충돌 상황 | 해결 |
|----------|------|
| WP에서 "버튼 빨간색" vs 디자인 시스템 "brand-500" | 디자인 시스템(CLAUDE.md) 우선 |
| PRD에서 "환불 3일 전" vs DB에 "2일 전" | DB 데이터 우선 (하드코딩 금지 원칙) |
| 로그 템플릿 vs 실제 필요 정보 | 템플릿 따르되, 필요시 섹션 추가 가능 |

---

## 7. 문서 수정 시 규칙

### 7.1 수정 가능한 문서

| 문서 | AI 수정 가능 | 조건 |
|------|:------------:|------|
| `/log/current-state.md` | ✅ | 작업 종료 시 필수 |
| `/log/WP-*-완료-로그.md` | ✅ | WP 완료 시 생성 |
| `/docs/troubleshooting-patterns.md` | ✅ | 새 패턴 발견 시 추가 |
| `/docs/external-services.md` | ✅ | 설정 변경 시 업데이트 |

### 7.2 수정 시 주의

| 문서 | 주의사항 |
|------|----------|
| `/core/*.md` | 기획 변경은 사용자 확인 후 |
| `/CLAUDE.md` | 코드 컨벤션 변경은 사용자 확인 후 |
| `/roadmap/milestones.md` | 마일스톤 구조 변경은 사용자 확인 후 |

### 7.3 수정 후 필수 작업

```
1. 버전 번호 증가 (있는 경우)
2. "마지막 업데이트" 날짜 갱신
3. 변경 이력 섹션에 기록 (있는 경우)
4. 관련 문서의 "관련 문서" 섹션 버전 참조도 최신화
```

### 7.4 Core 문서 중복 관리 원칙

Core 문서(`/core/*.md`)를 수정할 때는 다음의 **Source of Truth** 원칙을 따라야 합니다.

**Source of Truth 지정:**

| 주제 | Source of Truth 문서 | 예시 |
|------|---------------------|------|
| 서비스 본질, 브랜드 스토리, 핵심 가치 정의 | **서비스 개요** | 핵심 가치 4종 테이블 |
| 기능 정의, 비즈니스 규칙 | **PRD** | 환불 규정, 대기자 응답 시간, 칭찬 문구 목록, 세그먼트 정의 |
| 기술 선정, 구현 코드 | **기술 스택 및 개발 로드맵** | 색상/폰트 CSS 코드, 아이콘 매핑 테이블 |
| DB 설계, 데이터 흐름, API 구조 | **시스템 구조** | 테이블 SQL, 세그먼트 계산 로직 |

**중복 방지 규칙:**

1. **수치/목록은 한 곳에서만 정의:** 환불 규정, 대기자 응답 시간, 칭찬 문구 등 구체적 수치나 목록은 Source of Truth 문서에서만 정의하고, 다른 문서에서는 `(상세: [문서명] 섹션 X "제목" 참조)`로 대체
2. **정의 vs 참조 구분:** Source of Truth 문서에서 상세 정의하고, 다른 문서에서는 요약 + 참조만 기술
3. **버전 참조 현행화:** 문서 수정 시 해당 문서의 상호 참조 버전(`관련 문서` 헤더)도 반드시 확인하여 최신 버전으로 업데이트. 관련된 다른 문서의 참조 버전도 함께 수정
4. **새 규칙/수치 추가 시:** Source of Truth 문서에 먼저 추가하고, 다른 문서에서 필요하면 참조만 추가. 같은 내용을 복사-붙여넣기 금지

### 7.5 MVP 범위 엄수 원칙

MVP는 **True MVP (Phase 0~2, 5~6주)**와 **Growth Phase (Phase 3~6)**로 구분된다.
Technical Roadmap (기술 스택 v1.7) 개요 참조.

**엄수 규칙:**

1. **Growth Phase 기능 구현 금지:** Phase 0~2에 포함되지 않은 기능(아래 목록)은 MVP 단계에서 절대 구현하지 않는다:
   - 계좌이체 결제 (입금자명, 입금 기한, 수동 확인)
   - 배지 시스템, 칭찬하기, 내 책장, 후기 남기기
   - 5단계 온보딩, 후킹 랜딩페이지
   - 운영자 대시보드, 알림 템플릿 관리, 운영자 권한 관리

2. **간편결제 전용:** MVP에서는 카카오페이/토스페이먼츠만 지원.

---

## 8. 새 문서 생성 시 규칙

### 8.1 위치 선택

| 문서 유형 | 위치 |
|----------|------|
| 작업 완료 로그 | `/log/` |
| 기술 결정 (ADR) | `/docs/adr/` |
| 트러블슈팅 | `/docs/troubleshooting-patterns.md`에 추가 |
| 새 WP | `/roadmap/work-packages/` |

### 8.2 필수 포함 요소

```markdown
> **버전**: 1.0
> **마지막 업데이트**: YYYY-MM-DD
> **용도**: [문서의 목적]
```

---

## 9. 빠른 참조

작업 중 빠른 정보가 필요하면:

→ [`/core/AI_QUICK_REFERENCE.md`](/core/AI_QUICK_REFERENCE.md)

코드 작성 규칙이 필요하면:

→ [`/CLAUDE.md`](/CLAUDE.md)

---

## 10. 요약

```
┌─────────────────────────────────────────────────────────────┐
│                    문서 참조 흐름                            │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│  작업 시작 → current-state.md → WP 문서 → Scenario          │
│      │                                                       │
│      ▼                                                       │
│  코드 작성 → CLAUDE.md (컨벤션) → docs/ (기술 참조)          │
│      │                                                       │
│      ▼                                                       │
│  기획 확인 → core/*.md (PRD, 시스템 구조)                    │
│      │                                                       │
│      ▼                                                       │
│  작업 완료 → log/README.md 규칙 → current-state.md 업데이트  │
│                                                              │
└─────────────────────────────────────────────────────────────┘
```

---

## 변경 이력

| 날짜 | 버전 | 변경 내용 |
|------|------|----------|
| 2026-02-16 | 2.4 | **듀얼 테마 제거 반영:** §7.5 MVP 범위에서 Warm Mode/Electric Mode 전용 원칙 삭제, 기술 스택 버전 참조 v1.6→v1.7 갱신 |
| 2026-02-16 | 2.3 | §7.5 MVP 범위 엄수 원칙 신설 (Growth Phase 기능 구현 금지, Electric Mode/간편결제 전용 원칙) |
| 2026-02-16 | 2.2 | §7.3 수정 후 필수 작업에 버전 참조 현행화 추가, §7.4 Core 문서 중복 관리 원칙 신설 (Source of Truth 지정, 중복 방지 4원칙) |
| 2026-02-05 | 2.1 | 4.3절 문서 경로 참조 업데이트 (PRD v1.7, 서비스 개요 v1.5, 시스템 구조 v1.6) |
| 2026-01-17 | 2.0 | 메타 가이드로 전면 재작성. 기존 내용은 AI_QUICK_REFERENCE.md로 분리 |
